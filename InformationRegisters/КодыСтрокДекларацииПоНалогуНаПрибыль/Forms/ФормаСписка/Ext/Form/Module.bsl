
////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ПодготовитьФормуНаСервере();

КонецПроцедуры


////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ СПИСКА ФОРМЫ 

&НаКлиенте
Процедура СписокПриАктивизацииСтроки(Элемент)
	ОбновитьПредставлениеЭлементаНаКлиенте();
КонецПроцедуры


////////////////////////////////////////////////////////////////////////////////
// СЛУЖЕБНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ

&НаСервере
Процедура ПодготовитьФормуНаСервере()
		
	МакетКодовСтрок = УправлениеПечатью.МакетПечатнойФормы("ОбщийМакет.ПФ_MXL_КодыСтрокНалоговыхДеклараций");
		            		
КонецПроцедуры

&НаКлиенте
Процедура ОбновитьПредставлениеЭлементаНаКлиенте()
	
	ТекущиеДанные = Элементы.Список.ТекущиеДанные;
	Если ТекущиеДанные = Неопределено Тогда 
		Элементы.ДекорацияРасшифровкаКодСтроки.Заголовок = НСтр("ru=''");
	ИначеЕсли ПустаяСтрока(СтрЗаменить(ТекущиеДанные.КодСтроки, ".", "")) Тогда
		Элементы.ДекорацияРасшифровкаКодСтроки.Заголовок = НСтр("ru='<не указано>'");		
	Иначе
		ОбновитьПредставлениеЭлементаНаСервере(ТекущиеДанные.КодСтроки);
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Процедура ОбновитьПредставлениеЭлементаНаСервере(КодСтроки)
	
	ОбластьСтрок = МакетКодовСтрок.Области.Найти("НалогНаПрибыль_Расходы");
					
	НаименованиеСтроки = РегламентированнаяОтчетность.ПолучитьНаименованиеСтрокиКлассификатораПоКоду(МакетКодовСтрок, ОбластьСтрок, КодСтроки);
	Если ПустаяСтрока(НаименованиеСтроки) Тогда
		ТекстЗаголовка = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(НСтр("ru='строка с кодом %1 не найдена'"), СокрЛП(КодСтроки));
		Элементы.ДекорацияРасшифровкаКодСтроки.Заголовок = ТекстЗаголовка;
	Иначе
		Элементы.ДекорацияРасшифровкаКодСтроки.Заголовок = НаименованиеСтроки;
	КонецЕсли;
	
КонецПроцедуры


&НаКлиенте
Процедура СписокПриОкончанииРедактирования(Элемент, НоваяСтрока, ОтменаРедактирования)
	ОбновитьПредставлениеЭлементаНаКлиенте();
КонецПроцедуры

